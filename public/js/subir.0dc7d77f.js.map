{"version":3,"sources":["webpack:///./src/views/Subir.vue?8759","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/views/Subir.vue","webpack:///./src/views/Subir.vue?179e"],"names":["DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","this","match","error","setup","titulo","imagen","extracto","texto","errors","createImage","img","value","onFileChange","e","files","target","dataTransfer","length","validate","isValid","push","type","name","size","uploadImage","formData","FormData","append","a","post","then","res","console","log","catch","uploadPost","thumb","savePost","render","__scopeId"],"mappings":"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","file":"js/subir.0dc7d77f.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Subir.vue?vue&type=style&index=0&id=c03d4d4a&scoped=true&lang=sass\"","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","<template lang=\"pug\">\nsection.subir\n    .tituloCont\n        h2.titulo Subir Post\n    div.formulario\n        input(v-model=\"titulo\" name=\"titulo\" placeholder=\"Titulo\" type=\"text\" ).tituloImp\n        input(v-on:change=\"onFileChange\" name=\"imagen\" type=\"file\").imagen\n        textarea(v-model=\"extracto\" name=\"extracto\" placeholder=\"Extracto\").extracto\n        textarea(v-model=\"texto\" name=\"texto\" placeholder=\"Texto\").texto\n        button(name=\"enviar\" @click=\"(savePost())\").enviar Guardar\n        p.errors(v-if=\"errors.length > 0\" v-for=\"error of errors\" :key=\"error\") * {{error}}\n</template>\n\n<script>\nimport axios from 'axios';\nimport { ref } from 'vue';\nexport default {\n    setup(){\n\n        //----Variables-------\n        let titulo = ref('');\n        let imagen = ref('');\n        let extracto = ref('');\n        let texto = ref('');\n        let errors = ref([]);\n\n        //-----Methods--------\n\n        //--Image\n        const createImage = (img) => {\n            imagen.value = img;\n        };\n\n        const onFileChange = (e) =>{\n            let files = e.target.files || e.dataTransfer.files;\n            !files.length ? null : createImage(files[0]);\n        };\n        //-- End Imagen\n        //-- Validate\n        const validate = () =>{\n            errors.value = [];\n            let isValid = true;\n            if (!titulo.value || titulo.value.length > 200){\n                isValid = false;\n                errors.value.push('El campo titulo no debe estar vacio y debe ser menor a 200 caracteres');\n            }\n            if (!extracto.value || extracto.value.length > 250){\n                isValid = false;\n                errors.value.push('El extracto no puede estar vacio y debe ser menor a 250 caracteres');\n            }\n            if (!texto.value) {\n                isValid = false;\n                errors.value.push('El texto no puede estar vacio');\n            }\n            if (imagen.value){\n                const type = imagen.value.type;\n                const name = imagen.value.name;\n                const size = imagen.value.size;\n                if (size > 2000000) { \n                    isValid = false; \n                    errors.value.push('El tamaÃ±o de la imagen debe ser menor a 2MB'); }\n                if (name.length > 50 ) { \n                    isValid = false;\n                    errors.value.push('El nombte de la imagen debe ser menor a 50 caracteres'); }\n                if (type == 'image/jpeg' || type == 'image/png') {\n                    null;\n                } else {\n                    isValid = false;\n                    errors.value.push('El archivo no es una imagen valida los formatos admitidos son jpeg y png');\n                }\n            } else {\n                isValid = false;\n                errors.value.push('Debe agregar una imagen');\n            }\n            return isValid;\n        };    \n        //-- Uploads\n        const uploadImage = () => {\n            const formData = new FormData();\n            formData.append('file', imagen.value);\n            axios.post('http://localhost:3000/api/articulo/upload', formData)\n                .then(res=>{\n                    console.log(res);\n                })\n                .catch(console.log);\n        };\n        const uploadPost = () => {\n            const post = {\n                titulo: titulo.value,\n                extracto: extracto.value,\n                texto: texto.value,\n                thumb: imagen.value.name\n            };\n            axios.post('http://localhost:3000/api/articulo/add', post)\n                .then(res=>{\n                    console.log(res);\n                })\n                .catch(console.log);\n        };\n        //-- Event Listeners\n        const savePost = () =>{\n            if (validate()){\n                console.log('validado');\n                uploadImage();\n                uploadPost();\n            } else {\n                console.log('invalido');\n            };\n        };\n\n        return {\n            //Variables\n            titulo, imagen, extracto, texto, errors,\n\n            //Methods\n            onFileChange, savePost\n        };\n    }\n\n}\n</script>\n\n<style scoped lang=\"sass\">\n.subir\n    display: flex\n    justify-content: center\n    align-items: center\n    flex-direction: column\n    width: 98vw\n    height: auto\n    .tituloCont\n        padding-top: 2rem\n        .titulo\n            color: rgba(244, 244, 244, .7)\n    .formulario\n        display: flex\n        justify-content: flex-start\n        align-items: center\n        flex-direction: column\n        background: rgba(20, 122, 140, .2)\n        width: 85%\n        height: 50rem\n        border-radius: 7px\n        padding-top: 2rem\n        margin-top: 2rem\n        margin-bottom: 2rem\n        input\n            margin-top: 2rem\n            margin-bottom: 2rem\n            width: 25rem\n            height: 2rem\n            color: rgba(23, 133, 133, .9)\n            font-weight: bold\n            padding: 7px\n        .extracto\n            margin-bottom: 2rem\n            max-width: 34rem\n            max-height: 10rem\n            min-width: 25rem\n            min-height: 7rem\n            font-weight: bold\n            padding: 7px\n        .texto\n            margin-bottom: 2rem\n            max-width: 34rem\n            max-height: 16rem\n            min-width: 25rem\n            min-height: 15rem\n            font-weight: bold\n            padding: 7px\n        button\n            width: 12rem\n            height: 2rem\n            font-weight: bold\n            color: rgb(30, 80 ,80 )\n            border-radius: 4px\n            border: 0px solid\n            cursor: pointer\n            &:hover\n                color: rgb(200, 200, 200)\n                background: rgba(50, 200, 200, .2)\n        .errors\n            margin-top: .3rem\n            color: rgba(220, 20, 50, .9)\n\n\n</style>","import { render } from \"./Subir.vue?vue&type=template&id=c03d4d4a&scoped=true&lang=pug\"\nimport script from \"./Subir.vue?vue&type=script&lang=js\"\nexport * from \"./Subir.vue?vue&type=script&lang=js\"\n\nimport \"./Subir.vue?vue&type=style&index=0&id=c03d4d4a&scoped=true&lang=sass\"\nscript.render = render\nscript.__scopeId = \"data-v-c03d4d4a\"\n\nexport default script"],"sourceRoot":""}